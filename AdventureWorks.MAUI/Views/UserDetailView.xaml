<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:partial="clr-namespace:AdventureWorks.MAUI.ViewsPartial"
             xmlns:vm="clr-namespace:AdventureWorks.MAUI.MauiViewModelClasses"
             xmlns:converters="clr-namespace:Common.Library.MAUI.Converters;assembly=Common.Library.MAUI"
             x:Class="AdventureWorks.MAUI.Views.UserDetailView"
             x:DataType="vm:UserViewModel"
             Title="User Information">

    <ContentPage.Resources>
        <!-- Declare an instance of the InvertedBoolConverter class -->
        <converters:InvertedBoolConverter x:Key="invertedBoolean" />
    </ContentPage.Resources>

    <ScrollView>
        <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto" 
              ColumnDefinitions="Auto,*"
              Style="{StaticResource Grid.Page}">
            <partial:HeaderView 
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    ViewTitle="User Information"
                    ViewDescription="Modify user information." />
            <Label Grid.Row="1"
                   Text="Login ID"/>
            <VerticalStackLayout
                    Grid.Row="1"
                    Grid.Column="1">
                <Entry Text="{Binding CurrentEntity.LoginId}"/>
                <Label FontSize="Micro"
                       Text="Please use letters and numbers."/>
            </VerticalStackLayout>
            <Label Grid.Row="2"
                   Text="First Name"/>
            <Entry Grid.Row="2"
                   Grid.Column="1"
                   Text="{Binding CurrentEntity.FirstName}"/>
            <Label Grid.Row="3"
                   Text="Last Name"/>
            <Entry Grid.Row="3"
                   Grid.Column="1"
                   Text="{Binding CurrentEntity.LastName}"/>
            <Label Grid.Row="4"
                   Text="Email Address"/>
            <Entry Grid.Row="4"
                   Grid.Column="1"
                   Keyboard="Email"
                   Text="{Binding CurrentEntity.Email}"/>
            <Label Grid.Row="5"
                   Text="Is Enrolled?"/>
            <FlexLayout Grid.Row="5"
                        Grid.Column="1"
                        Wrap="Wrap"
                        Direction="Row">
                <HorizontalStackLayout>
                    <Label Text="401k?"/>
                    <CheckBox IsChecked="{Binding CurrentEntity.IsEnrolledIn401k}"/>
                </HorizontalStackLayout>
                <HorizontalStackLayout>
                    <Label Text="Flex Time?"/>
                    <CheckBox x:Name="flexTime"
                              IsChecked="{Binding CurrentEntity.IsEnrolledInFlexTime}"/>
                </HorizontalStackLayout>
                <HorizontalStackLayout>
                    <Label Text="Health Care?"/>
                    <CheckBox IsChecked="{Binding CurrentEntity.IsEnrolledInHealthCare}"/>
                </HorizontalStackLayout>
                <HorizontalStackLayout>
                    <Label Text="Health Savings Account?"/>
                    <CheckBox IsChecked="{Binding CurrentEntity.IsEnrolledInHSA}"/>
                </HorizontalStackLayout>
            </FlexLayout>
            <Label Grid.Row="6"
                   Text="Stll Employed?" />
            <Switch Grid.Row="6"
                    Grid.Column="1"
                    IsToggled="{Binding CurrentEntity.IsEmployed}"/>
            <Label Grid.Row="7"
                   Text="Employee Type" />
            <FlexLayout Grid.Row="7"
                        Grid.Column="1"
                        Wrap="Wrap"
                        Direction="Row">
                <HorizontalStackLayout>
                    <Label Text="Full Time" />
                    <RadioButton GroupName="EmployeeType"
                                 IsChecked="{Binding CurrentEntity.IsFullTime}" />
                </HorizontalStackLayout>
                <HorizontalStackLayout>
                    <Label Text="Part Time" />
                    <RadioButton GroupName="EmployeeType"
                                 IsChecked="{Binding CurrentEntity.IsFullTime, Converter={StaticResource invertedBoolean}}"/>
                </HorizontalStackLayout>
            </FlexLayout>
            <Label Grid.Row="8"
                   Text="Birth Date" />
            <DatePicker Grid.Row="8" 
                        Grid.Column="1"
                        Format="dd/MM/yyyy"
                        Date="{Binding CurrentEntity.BirthDate}" />
            <Label Grid.Row="9"
                   Text="Start Time" />
            <TimePicker Grid.Row="9"
                        Grid.Column="1"
                        IsEnabled="{Binding CurrentEntity.IsFullTime, Converter={StaticResource invertedBoolean}}"
                        Time="{Binding CurrentEntity.StartTime}" />
            <Label Grid.Row="10"
                   Text="Phone" />
            <FlexLayout Grid.Row="10"
                        Grid.Column="1"
                        Wrap="Wrap"
                        Direction="Row">
                <HorizontalStackLayout>
                    <Entry Text="{Binding CurrentEntity.Phone}"
                           MinimumWidthRequest="150" />
                </HorizontalStackLayout>
                <HorizontalStackLayout>
                    <Picker VerticalTextAlignment="Center"
                            ItemsSource="{Binding PhoneTypesList}"
                            SelectedItem="{Binding CurrentEntity.PhoneType}">
                    </Picker>
                </HorizontalStackLayout>
            </FlexLayout>
            <HorizontalStackLayout
                    Grid.Row="11"
                    Grid.Column="1"
                    Spacing="5">
                <ImageButton Source="save.png"
                             ToolTipProperties.Text="Save"
                             Command="{Binding SaveCommand}"/>
                <ImageButton Source="cancel.png"
                             ToolTipProperties.Text="Cancel"
                             Command="{Binding CancelCommand}"/>
            </HorizontalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>